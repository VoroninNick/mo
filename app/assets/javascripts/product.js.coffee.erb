# Place all the behaviors and hooks related to the matching controller here.
# All this logic will automatically be available in application.js.coffee.
# You can use CoffeeScript in this file: http://coffeescript.org/

SlideToItem =(index)->
#  $('ul.product-carousel li').remove
  alert "index "+index

$(document).ready ->
  #  ===================================================================== product one item, drink sets carousel
  owl_ds = $("ul.pd_drink_sets_carousel")
  owl_ds.owlCarousel
    navigation:true,
    pagination: false,
    navigationText: [
      '<%= ApplicationHelper.embedded_svg_js "MO-arrow.svg", class: "owl_arrow_prev"%>',
      '<%= ApplicationHelper.embedded_svg_js "MO-arrow.svg", class: "owl_arrow_next"%>'
    ],
    items: 1 #10 items above 1000px browser width
    itemsDesktop: [ #5 items between 1000px and 901px
      1000
      1
    ]
    itemsDesktopSmall: [ # betweem 900px and 601px
      900
      1
    ]
    itemsTablet: [ #2 items between 600 and 0
      600
      1
    ]
    itemsMobile: false # itemsMobile disabled - inherit from itemsTablet option
    autoPlay : false,
    transitionStyle : "fade"

  #  =============================================================================== product one item, decors carousel
  owl_d = $("ul.pd_decors_carousel")
  owl_d.owlCarousel
    navigation:true,
    pagination: false,
    navigationText: [
      '<%= ApplicationHelper.embedded_svg_js "MO-arrow.svg", class: "owl_arrow_prev"%>',
      '<%= ApplicationHelper.embedded_svg_js "MO-arrow.svg", class: "owl_arrow_next"%>'
    ],
    items: 1 #10 items above 1000px browser width
    itemsDesktop: [ #5 items between 1000px and 901px
      1000
      1
    ]
    itemsDesktopSmall: [ # betweem 900px and 601px
      900
      1
    ]
    itemsTablet: [ #2 items between 600 and 0
      600
      1
    ]
    itemsMobile: false # itemsMobile disabled - inherit from itemsTablet option
    autoPlay : false

  # vertical carousel products
  $('.product-carousel').on('click','.pcb', () ->
    $parent = $(this).closest('ul.product-carousel')
    $lis = $parent.find('li')

    $button = $(this)
    $active_li = $lis.filter('.active')
    active_li_index = $active_li.index()
    max_index = $lis.length - 1
    next_index = false

    if $button.hasClass('pc-button-up')
      next_index = active_li_index+1
      if next_index > max_index
        next_index = 0
    else
      next_index = active_li_index - 1
      if next_index < 0
        next_index = max_index

    $active_li.removeClass('active')
    $lis.eq(next_index).addClass('active')
  )



