# Place all the behaviors and hooks related to the matching controller here.
# All this logic will automatically be available in application.js.
# You can use CoffeeScript in this file: http://coffeescript.org/

$(document).ready ->
    $("a.fancy_gallery").fancybox
        padding: 0
        width: '100%'
        closeBtn : false
        prevEffect: "none"
        nextEffect: "none"
        helpers:
            title:
                type: "outside"

            thumbs:
                width: 75
                height: 50
        tpl:
            wrap: "<div id=\"gallery_wrapper\" class=\"fancybox-wrap mywrap\" tabIndex=\"-1\"><div class=\"fancybox-skin\"><div class=\"fancybox-outer\"><div class=\"fancybox-inner\"></div><a class=\"close_fancybox_gallery\" onclick=\"$.fancybox.close()\"><svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"
            width=\"14.85px\" height=\"14.849px\" viewBox=\"0 0 14.85 14.849\" enable-background=\"new 0 0 14.85 14.849\" xml:space=\"preserve\">
            <polygon fill=\"#D1D3D4\" points=\"14.85,0.707 14.143,0 7.425,6.718 0.707,0 0,0.707 6.718,7.425 0,14.142 0.707,14.849 7.425,8.132
                14.143,14.849 14.85,14.142 8.132,7.425 \"/>
            </svg></a></div></div></div>"
    $("a.fncy-custom-close").click (e) ->
        e.preventDefault()
        $.fancybox.close()



    $('.block-inner').click ->
        if $(this).parent().hasClass('expand')
            $(this).parent().removeClass('expand')
        else
            $('.product-block').removeClass('expand')
            $(this).parent().addClass('expand')

    $('a.close-detail').click ->
        e.preventDefault()
        $('.product-block').removeClass('expand')
    count_product = +$('form#form_add_to_cart input.count_product').val()
    $('a.add_one_point').click ->
        count_product+=1
        $('form#form_add_to_cart input.count_product').val(count_product)
    $('a.remove_one_point').click ->
        if count_product > 1
            count_product-=1
            $('form#form_add_to_cart input.count_product').val(count_product)








  menuIsOpen = false
  $("#main_menu_button").click ->
    toggleMenu()

  toggleMenu = ->
    if menuIsOpen
      closeMenu()
    else
      openMenu()

  openMenu = ->
    menuIsOpen = true
#    wh = $(window).height()
    $("#main_menu_button").addClass "menu-is-open"
    $('.main_menu_wrap').removeClass('open_menu')
#    $(".menu").css(transform: "translate(0," + (-wh) + "px)").transition
#      y: 0
#      duration: 400
#
#    links = $(".menu-link:not(.mobile-hide)")
#    links.each (i) ->
#      $(this).css(transform: "translate(0," + (-wh) + "px)").transition
#        y: 0
#        duration: 400 + (70 * (links.length - i))


  closeMenu = ->
    menuIsOpen = false
#    wh = $(window).height()
    $("#main_menu_button").removeClass "menu-is-open"
    $('.main_menu_wrap').addClass('open_menu')
#    $(".menu").transition
#      y: -wh
#      duration: 250
#      easing: "easeInQuad"
#    , ->
#      $(".menu").removeClass "menu-is-open"




#
#  $(".menu-link a").click ->
#    closeMenu()  if mobileCheck()
  owl3 = $("ul#promotion_slider")
  owl3.owlCarousel
    pagination: false,
    navigation: true,
    navigationText: [
      '<%= ApplicationHelper.embedded_svg_js "MO-arrow.svg", class: "owl_arrow_prev"%>',
      '<%= ApplicationHelper.embedded_svg_js "MO-arrow.svg", class: "owl_arrow_next"%>'
    ],
    items: 4 #10 items above 1000px browser width
    itemsDesktop: [ #5 items between 1000px and 901px
      1000
      3
    ]
    itemsDesktopSmall: [ # betweem 900px and 601px
      900
      2
    ]
    itemsTablet: [ #2 items between 600 and 0
      640
      1
    ]
    itemsMobile: false # itemsMobile disabled - inherit from itemsTablet option
    autoPlay : false

